<odoo>
  <!--<data>-->
    <!-- Overriding base view to change default behaviour -->
    <record model="ir.ui.view" id="sale_order_customization">
        <field name="name">sale.order.custom.form</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form"/>
        <field name="arch" type="xml">
            <xpath expr="//button[@name='action_quotation_send']" position="replace">

            </xpath>
            <xpath expr="//button[@name='action_quotation_send']" position="replace">

            </xpath>
            <xpath expr="//button[@name='print_quotation']" position="replace">

            </xpath>
            <xpath expr="//button[@name='action_confirm']" position="replace">

            </xpath>
            <xpath expr="//button[@name='action_confirm']" position="replace">

            </xpath>
            <xpath expr="//button[@name='action_quotation_send']" position="replace">

            </xpath>
            <xpath expr="//button[@name='action_cancel']" position="replace">

            </xpath>
            <xpath expr="//button[@name='action_draft']" position="replace">

            </xpath>
            <xpath expr="//button[@name='action_done']" position="replace">

            </xpath>
            <xpath expr="//button[@name='action_unlock']" position="replace">

            </xpath>
            <xpath expr="//button[@name='364']" position="replace">

            </xpath>
            <xpath expr="//button[@name='print_quotation']" position="replace">

            </xpath>
            <xpath expr="//button[@name='action_quotation_send']" position="replace">

            </xpath>
            <header>

                <button name="action_authorize" string="Autorizar" type="object" states="draft,sale_request,cancel_request" class="oe_highlight"/>
                <button name="action_quotation_send" string="Enviar Por Correo" type="object" states="leader_approved" />
                <button name="action_quotation_send" type="object" string="Enviar factura PRO-Forma" groups="sale.group_proforma_sales" class="btn-primary" attrs="{'invisible': ['|', ('state', '!=', 'draft'), ('invoice_count','&gt;=',1)]}" context="{'proforma': True}"/>
                <button name="print_quotation" string="Imprimir" type="object" states="leader_approved,sent,sale_request,sale" class="btn-primary o_sale_print"/>
                <button name="action_sale_request" string="Solicitud de Venta" states="sent" type="object" class="oe_highlight"/>
                <button name="action_integration" string="Integración" states="sale" type="object" class="oe_highlight"/>
                <button name="action_entitlement" string="Titulación" states="folder_integration" type="object" class="oe_highlight"/>
                <button name="action_finished_home" string="Casa Terminada" states="entitlement" type="object" class="oe_highlight"/>
                <button name="action_quality_check" string="Recibida Post-Venta" states="house_finished" type="object" class="oe_highlight"/>
                <button name="action_paid" string="Casa Pagada" states="quality_check,deed" type="object" class="oe_highlight"/>
                <button name="action_deed" string="Escrituración" states="quality_check,house_paid" type="object" class="oe_highlight"/>
                <button name="action_done" type="object" string="Entregada" states="house_paid,deed" class="oe_highlight"/>
                <button name="action_reject" string="Rechazar" type="object" states="leader_approved,sale_request,sale,folder_integration,entitlement,house_finished,quality_check,house_paid,deed,cancel_request"/>
                <button name="action_cancel" string="Cancelar" states="draft,leader_approved,sent,sale_request" type="object"/>
                <button name="action_draft" string="Cotización" states="cancel" type="object"/>

                <!--<button name="action_confirm" id="action_confirm" string="Confirm Sale" class="btn-primary" type="object" attrs="{'invisible': [('state', 'not in', ['sent'])]}"/>
                <button name="action_confirm" string="Confirm Sale" type="object" attrs="{'invisible': [('state', 'not in', ['draft'])]}"/>
                Action confirm goes inside of authorize method-->

            </header>
            <field name="state" position="replace">
                <field name="state" widget="statusbar" statusbar_visible="draft,leader_approved,sent,sale_request,sale,folder_integration,entitlement,house_finished,quality_check,house_paid,deed,done,cancel_request,cancel" on_change="1" modifiers="{'readonly':true}"/>
            </field>



            <xpath expr="//page[1]" position="after">
                <page string="Pagos">
                    <h4>Plan de Pagos</h4>
                    <field name="payment_plan_id" mode="tree" attrs="{'readonly': [('state', 'in', ('done','cancel'))]}">
                        <tree string="Plan de Pagos" editable="bottom" >
                            <field name="payment_date"/>
                            <field name="payment_amount" widget="monetary"/>
                            <field name="note"/>
                        </tree>
                    </field>
                    <group class="oe_subtotal_footer oe_right" colspan="2" name="sale_total">
                        <div class="oe_subtotal_footer_separator oe_inline o_td_label">
                            <label for="plan_total"/>
                        </div>
                        <field name="plan_total" nolabel="1" class="oe_subtotal_footer_separator" widget="monetary"/>
                        <div class="oe_subtotal_footer_separator oe_inline o_td_label" attrs="{'invisible': [('plan_difference', '=', 0)]}">
                            <label for="plan_difference"/>
                        </div>
                        <field name="plan_difference" nolabel="1" class="oe_subtotal_footer_separator" widget="monetary" style="color:red;" attrs="{'invisible': [('plan_difference', '=', 0)]}"/>
                    </group>
                    <br>

                    </br>
                    <br>

                    </br>
                    <h4>Pagos Recibidos</h4>
                    <field name="payments_ids" mode="tree">
                        <tree string="Pagos Recibidos" editable="bottom" >
                            <field name="payment_date"/>
                            <field name="amount" widget="monetary"/>
                            <field name="communication"/>
                            <field name="state"/>
                        </tree>
                    </field>
                    <group class="oe_subtotal_footer oe_right" colspan="2" name="sale_total">
                        <div class="oe_subtotal_footer_separator oe_inline o_td_label">
                            <label for="paid_total"/>
                        </div>
                        <field name="paid_total" nolabel="1" class="oe_subtotal_footer_separator" widget="monetary"/>
                        <div class="oe_subtotal_footer_separator oe_inline o_td_label">
                            <label for="open_total_by_date"/>
                        </div>
                        <field name="open_total_by_date" nolabel="1" class="oe_subtotal_footer_separator" widget="monetary"/>
                        <div class="oe_subtotal_footer_separator oe_inline o_td_label">
                            <label for="open_total"/>
                        </div>
                        <field name="open_total" nolabel="1" class="oe_subtotal_footer_separator" widget="monetary"/>
                    </group>
                </page>
                <page string="Comisiones">

                    <button name="action_update_commissions" string="Actualizar Comisiones" type="object" class="btn-primary"/>
                    <br>

                    </br>
                    <field name="commissions_ids" mode="tree">
                        <tree string="Plan de Pagos">
                            <field name="employee_id"/>
                            <field name="payment_date"/>
                            <field name="payment_amount" widget="monetary"/>
                            <field name="note"/>
                            <field name="state"/>
                            <field name="voucher" widget="binary"/>
                        </tree>
                    </field>
                    <!--
                    <group class="oe_subtotal_footer oe_right" colspan="2" name="sale_total">
                        <div class="oe_subtotal_footer_separator oe_inline o_td_label">
                            <label for="plan_total"/>
                        </div>
                        <field name="plan_total" nolabel="1" class="oe_subtotal_footer_separator" widget="monetary"/>
                    </group>
                    -->
                </page>
                <page string="Titulación">
                    <group>
                        <group>
                            <field name="general_data" widget="binary"/>
                            <field name="credit_request" widget="binary"/>
                            <field name="identification_id" widget="binary"/>
                            <field name="id_expiration_date"/>
                            <field name="fiscal_id" widget="binary"/>
                            <field name="curp" widget="binary"/>
                            <field name="proof_of_address" widget="binary"/>
                            <field name="birth_certificate" widget="binary"/>
                            <field name="marriage_certificate" widget="binary"/>
                            <field name="birth_certificate_2" widget="binary"/>
                            <field name="sic" widget="binary"/>
                            <field name="infonavit_conference" widget="binary"/>
                        </group>
                        <group>
                            <field name="inst_certificate" widget="binary"/>
                            <field name="pre_qualification_infonavit" widget="binary"/>
                            <field name="ecotechnics" widget="binary"/>
                            <field name="infonavit_account" widget="binary"/>
                            <field name="salary_receipt" widget="binary"/>
                            <field name="afore_account" widget="binary"/>
                            <field name="credit_bureau_report" widget="binary"/>
                            <field name="appraisal" widget="binary"/>
                            <field name="salary_receipts" widget="binary"/>
                            <field name="bank_acount_receipts" widget="binary"/>
                            <field name="tax_declaration" widget="binary"/>
                            <field name="labor_voucher" widget="binary"/>
                        </group>
                    </group>
                </page>
            </xpath>
        </field>
    </record>

    <!-- actions opening views on models -->
    <!--
    <record model="ir.actions.act_window" id="my_module.action_window">
      <field name="name">my_module window</field>
      <field name="res_model">my_module.my_module</field>
      <field name="view_mode">tree,form</field>
    </record>
    -->

    <!-- server action to the one above -->
    <!--
    <record model="ir.actions.server" id="my_module.action_server">
      <field name="name">my_module server</field>
      <field name="model_id" ref="model_my_module_my_module"/>
      <field name="state">code</field>
      <field name="code">
        action = {
          "type": "ir.actions.act_window",
          "view_mode": "tree,form",
          "res_model": self._name,
        }
      </field>
    </record>
    -->

    <!-- Top menu item -->
    <!--
    <menuitem name="my_module" id="my_module.menu_root"/>
    -->
    <!-- menu categories -->
    <!--
    <menuitem name="Menu 1" id="my_module.menu_1" parent="my_module.menu_root"/>
    <menuitem name="Menu 2" id="my_module.menu_2" parent="my_module.menu_root"/>
    -->
    <!-- actions -->
    <!--
    <menuitem name="List" id="my_module.menu_1_list" parent="my_module.menu_1"
              action="my_module.action_window"/>
    <menuitem name="Server to list" id="my_module" parent="my_module.menu_2"
              action="my_module.action_server"/>
    -->
  <!-- </data>-->

</odoo>